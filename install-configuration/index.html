
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the Nakama realtime and social server for games and apps.">
      
      
        <link rel="canonical" href="https://heroiclabs.com/docs/install-configuration/">
      
      
        <meta name="author" content="Heroic Labs Team & contributors">
      
      
        <link rel="shortcut icon" href="../images/favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.4">
    
    
      
        <title>Configuration - Nakama server</title>
      
    
    
      <script src="../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-769c285a91.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="https://heroiclabs.com/docs/" title="Nakama server" class="md-logo md-header-nav__button">
            <img src="../images/logo-white.svg" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Install and setup
                </span>
              
            
            Configuration
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/heroiclabs/nakama" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      heroiclabs/nakama
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../images/logo-white.svg">
      </i>
    
    Nakama server
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/heroiclabs/nakama" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      heroiclabs/nakama
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Install and setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Install and setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install-docker-quickstart/" title="Docker quickstart" class="md-nav__link">
      Docker quickstart
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-binary/" title="Binary install" class="md-nav__link">
      Binary install
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Configuration
      </label>
    
    <a href="./" title="Configuration" class="md-nav__link md-nav__link--active">
      Configuration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#specifying-a-config-file" title="Specifying a config file" class="md-nav__link">
    Specifying a config file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-properties" title="Common properties" class="md-nav__link">
    Common properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-configuration" title="Server Configuration" class="md-nav__link">
    Server Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log" title="Log" class="md-nav__link">
    Log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" title="Database" class="md-nav__link">
    Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime" title="Runtime" class="md-nav__link">
    Runtime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#socket" title="Socket" class="md-nav__link">
    Socket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session" title="Session" class="md-nav__link">
    Session
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purchase" title="Purchase" class="md-nav__link">
    Purchase
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apple" title="Apple" class="md-nav__link">
    Apple
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google" title="Google" class="md-nav__link">
    Google
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#social" title="Social" class="md-nav__link">
    Social
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notification" title="Notification" class="md-nav__link">
    Notification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steam" title="Steam" class="md-nav__link">
    Steam
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboard" title="Dashboard" class="md-nav__link">
    Dashboard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster" title="Cluster" class="md-nav__link">
    Cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-file" title="Example File" class="md-nav__link">
    Example File
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-server-cli/" title="Nakama CLI" class="md-nav__link">
      Nakama CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-nakama-upgrade/" title="Upgrades" class="md-nav__link">
      Upgrades
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../unity-client-guide/" title="Unity client guide" class="md-nav__link">
      Unity client guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../android-java-client-guide/" title="Android client guide" class="md-nav__link">
      Android client guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../javascript-client-guide/" title="JavaScript client guide" class="md-nav__link">
      JavaScript client guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../swift-ios-client-guide/" title="Swift/iOS client guide" class="md-nav__link">
      Swift/iOS client guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../user-accounts/" title="User accounts" class="md-nav__link">
      User accounts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Storage Engine
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Storage Engine
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../storage-collections/" title="Collections" class="md-nav__link">
      Collections
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Social
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Social
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../social-friends/" title="Friends" class="md-nav__link">
      Friends
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../social-groups-clans/" title="Groups and Clans" class="md-nav__link">
      Groups and Clans
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../social-in-app-notifications/" title="In-app Notifications" class="md-nav__link">
      In-app Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../social-realtime-chat/" title="Realtime Chat" class="md-nav__link">
      Realtime Chat
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Gameplay
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Gameplay
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gameplay-leaderboards/" title="Leaderboards" class="md-nav__link">
      Leaderboards
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gameplay-matchmaker/" title="Matchmaker" class="md-nav__link">
      Matchmaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gameplay-multiplayer-realtime/" title="Realtime Multiplayer" class="md-nav__link">
      Realtime Multiplayer
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../in-app-purchase-validation/" title="In-app Purchase Validation" class="md-nav__link">
      In-app Purchase Validation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Runtime Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Runtime Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../runtime-code-basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../runtime-code-function-reference/" title="Function Reference" class="md-nav__link">
      Function Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deployment-digital-ocean/" title="Digital Ocean" class="md-nav__link">
      Digital Ocean
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial-develop-with-libgdx/" title="Develop with LibGDX" class="md-nav__link">
      Develop with LibGDX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial-initialize-new-user/" title="Initialize a new user" class="md-nav__link">
      Initialize a new user
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial-remote-configuration/" title="Remote configuration" class="md-nav__link">
      Remote configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#specifying-a-config-file" title="Specifying a config file" class="md-nav__link">
    Specifying a config file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-properties" title="Common properties" class="md-nav__link">
    Common properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-configuration" title="Server Configuration" class="md-nav__link">
    Server Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log" title="Log" class="md-nav__link">
    Log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" title="Database" class="md-nav__link">
    Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime" title="Runtime" class="md-nav__link">
    Runtime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#socket" title="Socket" class="md-nav__link">
    Socket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session" title="Session" class="md-nav__link">
    Session
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purchase" title="Purchase" class="md-nav__link">
    Purchase
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apple" title="Apple" class="md-nav__link">
    Apple
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google" title="Google" class="md-nav__link">
    Google
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#social" title="Social" class="md-nav__link">
    Social
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notification" title="Notification" class="md-nav__link">
    Notification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steam" title="Steam" class="md-nav__link">
    Steam
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboard" title="Dashboard" class="md-nav__link">
    Dashboard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster" title="Cluster" class="md-nav__link">
    Cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-file" title="Example File" class="md-nav__link">
    Example File
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h1>
<p>A YAML configuration file configures many aspects of how your Nakama server runs. You can run Nakama without specifying a configuration file and rely on the the default settings instead.</p>
<h2 id="specifying-a-config-file">Specifying a config file<a class="headerlink" href="#specifying-a-config-file" title="Permanent link">&para;</a></h2>
<p>You can specify a configuration file at run-time using --config flag.</p>
<div class="codehilite"><pre><span></span>nakama --config my-special-config.yml
</pre></div>


<p>If you are running Nakama via Docker-Compose, you'll need to bind a folder in your machine so that it's available in Docker. Follow this guide to <a href="../install-docker-quickstart/#data">setup folder binding</a>.</p>
<h2 id="common-properties">Common properties<a class="headerlink" href="#common-properties" title="Permanent link">&para;</a></h2>
<p>There are a few configuration properties that need to be changed in most environments. The full list of configurations is at the <a href="#server-configuration">bottom of the page</a>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Nakama node name (must be unique) - It will default to <code>nakama-xxxx</code> where <code>xxxx</code> is 4 random characters.</td>
</tr>
<tr>
<td><code>data_dir</code></td>
<td>An absolute path to a writeable folder where Nakama will store its data, including logs. Default value is the working directory that Nakama was started on.</td>
</tr>
<tr>
<td><code>runtime.path</code></td>
<td>Path of modules to scan and load. Defaults to <code>data_dir/modules</code>.</td>
</tr>
<tr>
<td><code>database.address</code></td>
<td>List of database nodes to connect to. It should follow the form of <code>username:password@address:port/dbname</code> (<code>postgres://</code> protocol is appended to the path automatically). Defaults to <code>root@localhost:26257</code>.</td>
</tr>
<tr>
<td><code>socket.server_key</code></td>
<td>Server key to use to establish a connection to the server. Default value is <code>defaultkey</code>.</td>
</tr>
<tr>
<td><code>session.encryption_key</code></td>
<td>The encryption key used to produce the client token. Default value is <code>defaultencryptionkey</code>.</td>
</tr>
<tr>
<td><code>runtime.http_key</code></td>
<td>Key is used to protect the server's runtime HTTP invocations. Default value is <code>defaultkey</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Production settings</p>
<p>You must change the values of <strong><code>socket.server_key</code></strong>, <strong><code>session.encryption_key</code></strong> and <strong><code>runtime.http_key</code></strong> before you deploy Nakama to a live production environment.</p>
<p>Follow the <a href="deployment-production-settings.md">production settings deployment guide</a> for more information.</p>
</div>
<h2 id="server-configuration">Server Configuration<a class="headerlink" href="#server-configuration" title="Permanent link">&para;</a></h2>
<p>Nakama has various configuration options to make it as flexible as possible for various use cases and deployment environments.</p>
<p>Nakama ships with sane default values for all config options, therefore you'll only need to override a subset of the options. You can also setup your own config file, and override the values in the config file via command-line flags. For instance, to override Runtime Path:</p>
<div class="codehilite"><pre><span></span>nakama --runtime.path /tmp/my-modules
</pre></div>


<p>If fields are not specific, default values will be used. For more information on how to override flags, have a look at the <a href="../install-server-cli/">server command-line</a> page.</p>
<div class="admonition tip">
<p class="admonition-title">Override configuration</p>
<p>Every configuration option can set from a config file, as a command line flag or both where the command-line argument takes precedence and will override the configuration values.</p>
</div>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>name</code></td>
<td>Nakama node name (must be unique) - It will default to <code>nakama-xxxx</code> where <code>xxxx</code> is 4 random characters.  This name is also used in the log files.</td>
</tr>
<tr>
<td><code>data_dir</code></td>
<td><code>data_dir</code></td>
<td>An absolute path to a writeable folder where Nakama will store its data, including logs. Default value is the working directory that Nakama was started on.</td>
</tr>
</tbody>
</table>
<h3 id="log">Log<a class="headerlink" href="#log" title="Permanent link">&para;</a></h3>
<p>Nakama produces logs in JSON format so various systems can interact with the logs. By default they are written to log files inside <code>data_dir/logs</code> folder.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>stdout</code></td>
<td><code>log.stdout</code></td>
<td>Redirect logs to console standard output. The log file will no longer be used. Default is <code>false</code>.</td>
</tr>
<tr>
<td><code>verbose</code></td>
<td><code>log.verbose</code></td>
<td>Turn on verbose logging. You'll see a lot more logs including debug-level information. This is useful for debugging purposes. Default is <code>false</code>.</td>
</tr>
</tbody>
</table>
<h3 id="database">Database<a class="headerlink" href="#database" title="Permanent link">&para;</a></h3>
<p>Nakama requires a CockroachDB server instance to be available. Nakama creates and manages its own database called <code>nakama</code> within the CockroachDB database.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>address</code></td>
<td><code>database.address</code></td>
<td>List of database nodes to connect to. It should follow the form of <code>username:password@address:port/dbname</code> (<code>postgres://</code> protocol is appended to the path automatically). Defaults to <code>root@localhost:26257</code>.</td>
</tr>
<tr>
<td><code>conn_max_lifetime_ms</code></td>
<td><code>database.conn_max_lifetime_ms</code></td>
<td>Time in milliseconds to reuse a database connection before the connection is killed and a new one is created.. Default value is 60000.</td>
</tr>
<tr>
<td><code>max_open_conns</code></td>
<td><code>database.max_open_conns</code></td>
<td>Maximum number of allowed open connections to the database. Default value is 0 (no limit).</td>
</tr>
<tr>
<td><code>max_idle_conns</code></td>
<td><code>database.max_idle_conns</code></td>
<td>Maximum number of allowed open but unused connections to the database. Default value is 0 (no limit).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Database addresses</p>
<p>You can pass in multiple database addresses to Nakama via command like:</p>
<p><code>nakama --database.address "root@db1:26257" --database.address "root@db2:26257"</code></p>
</div>
<h3 id="runtime">Runtime<a class="headerlink" href="#runtime" title="Permanent link">&para;</a></h3>
<p>Options related to Lua-based runtime engine.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>env</code></td>
<td><em>N/A</em></td>
<td>List of Key-Value properties that are exposed to the Runtime scripts as environment variables.</td>
</tr>
<tr>
<td><code>path</code></td>
<td><code>runtime.path</code></td>
<td>Path of modules for the server to scan and load at startup. Default value is <code>data_dir/modules</code>.</td>
</tr>
<tr>
<td><code>http_key</code></td>
<td><code>runtime.http_key</code></td>
<td>A key used to authenticate HTTP Runtime invocations. Default value is <code>defaultkey</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>You must change <code>http_key</code> before going live with your app!</p>
</div>
<h3 id="socket">Socket<a class="headerlink" href="#socket" title="Permanent link">&para;</a></h3>
<p>Options related to connection socket and transport protocol between the server and clients.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>server_key</code></td>
<td><code>socket.server_key</code></td>
<td>Server key to use to establish a connection to the server. Default value is <code>defaultkey</code>.</td>
</tr>
<tr>
<td><code>port</code></td>
<td><code>socket.port</code></td>
<td>The port for accepting connections from the client, listening on all interfaces. Default value is 7350.</td>
</tr>
<tr>
<td><code>max_message_size_bytes</code></td>
<td><code>socket.max_message_size_bytes</code></td>
<td>Maximum amount of data in bytes allowed to be read from the client socket per message. Default value is 1024.</td>
</tr>
<tr>
<td><code>write_wait_ms</code></td>
<td><code>socket.write_wait_ms</code></td>
<td>Time in milliseconds to wait for an ack from the client when writing data. Default value is 5000.</td>
</tr>
<tr>
<td><code>pong_wait_ms</code></td>
<td><code>socket.pong_wait_ms</code></td>
<td>Time in milliseconds to wait for a pong message from the client after sending a ping. Default value is 10000.</td>
</tr>
<tr>
<td><code>ping_period_ms</code></td>
<td><code>socket.ping_period_ms</code></td>
<td>Time in milliseconds to wait between client ping messages. This value must be less than the <code>pong_wait_ms</code>. Default value is 8000.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>You must change <code>server_key</code> before going live with your app!</p>
</div>
<h3 id="session">Session<a class="headerlink" href="#session" title="Permanent link">&para;</a></h3>
<p>You can change configuration options related to each user session, such as the encryption key used to create the token.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>encryption_key</code></td>
<td><code>session.encryption_key</code></td>
<td>The encryption key used to produce the client token. Default value is <code>defaultencryptionkey</code>.</td>
</tr>
<tr>
<td><code>token_expiry_ms</code></td>
<td><code>session.token_expiry_ms</code></td>
<td>Token expiry in milliseconds. Default value is 60000.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>You must change <code>encryption_key</code> before going live with your app!</p>
</div>
<h3 id="purchase">Purchase<a class="headerlink" href="#purchase" title="Permanent link">&para;</a></h3>
<p>Nakama can verify in-app purchases by connecting to various stores and keeps a ledger of valid purchases. This is useful for preventing common in-app purchase replay attacks with valid receipts, as well as restoring purchases for user accounts as needed.</p>
<h4 id="apple">Apple<a class="headerlink" href="#apple" title="Permanent link">&para;</a></h4>
<p>Apple In-App Purchase configuration</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>password</code></td>
<td><code>apple.password</code></td>
<td>Your application's shared secret.</td>
</tr>
<tr>
<td><code>production</code></td>
<td><code>apple.production</code></td>
<td>The order in which the reciept verification server will be contacted. Set <code>false</code> for test apps and <code>true</code> for live apps. Default is <code>false</code>.</td>
</tr>
<tr>
<td><code>timeout_ms</code></td>
<td><code>apple.timeout_ms</code></td>
<td>Connection timeout to connect to Apple services. Default value is 1500.</td>
</tr>
</tbody>
</table>
<h4 id="google">Google<a class="headerlink" href="#google" title="Permanent link">&para;</a></h4>
<p>Google In-App Purchase configuration</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>package</code></td>
<td><code>google.package</code></td>
<td>The package name the app is published under, such as <code>com.myapp.testapp</code>.</td>
</tr>
<tr>
<td><code>service_key_file</code></td>
<td><code>google.service_key_file</code></td>
<td>Absolute file path to the service key JSON file.</td>
</tr>
<tr>
<td><code>timeout_ms</code></td>
<td><code>google..timeout_ms</code></td>
<td>Connection timeout to connect to Google services. Default value is 1500.</td>
</tr>
</tbody>
</table>
<h3 id="social">Social<a class="headerlink" href="#social" title="Permanent link">&para;</a></h3>
<p>Nakama can connect to various social networks to fetch user information. It can also act as a notification center for delivering and persisting notifications.</p>
<h4 id="notification">Notification<a class="headerlink" href="#notification" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>expiry_ms</code></td>
<td><code>notification.expiry_ms</code></td>
<td>Set notification expiry in milliseconds. Default value is 86400000 (1 day).</td>
</tr>
</tbody>
</table>
<h4 id="steam">Steam<a class="headerlink" href="#steam" title="Permanent link">&para;</a></h4>
<p>Configure Steam network settings. Facebook, Google and GameCenter don't require any server settings.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>publisher_key</code></td>
<td><code>steam.publisher_key</code></td>
<td>Steam Publisher Key.</td>
</tr>
<tr>
<td><code>app_id</code></td>
<td><code>steam.app_id</code></td>
<td>Steam App ID.</td>
</tr>
</tbody>
</table>
<h3 id="dashboard">Dashboard<a class="headerlink" href="#dashboard" title="Permanent link">&para;</a></h3>
<p>This section defined the configuration related for the embedded Dashboard.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>port</code></td>
<td><code>dashboard.port</code></td>
<td>The port for accepting connections to the dashboard, listening on all interfaces. Default value is 7351.</td>
</tr>
</tbody>
</table>
<h3 id="cluster">Cluster<a class="headerlink" href="#cluster" title="Permanent link">&para;</a></h3>
<p>This section configures how the nodes should connect to each to other form a cluster.</p>
<div class="admonition tip">
<p class="admonition-title">Nakama Enterprise Only</p>
<p>The following configuration options are available only in the Nakama Enterprise version of the Nakama server</p>
<p>Nakama is designed to run in production as a highly available cluster. You can start a cluster locally on your development machine if you&rsquo;re running <a href="https://heroiclabs.com/nakama-enterprise">Nakama Enterprise</a>. In production you can use either Nakama Enterprise or our <a href="https://heroiclabs.com/managed-cloud">Managed Cloud</a> service.</p>
</div>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>join</code></td>
<td><code>cluster.join</code></td>
<td>List of hostname and port of other Nakama nodes to connect to.</td>
</tr>
<tr>
<td><code>gossip_bindaddr</code></td>
<td><code>cluster.gossip_bindaddr</code></td>
<td>Interface address to bind Nakama to for discovery. By default listening on all interfaces.</td>
</tr>
<tr>
<td><code>gossip_bindport</code></td>
<td><code>cluster.gossip_bindport</code></td>
<td>Port number to bind Nakama to for discovery. Default value is 7352.</td>
</tr>
<tr>
<td><code>rpc_port</code></td>
<td><code>cluster.rpc_port</code></td>
<td>Port number to use to send data between Nakama nodes. Default value is 7353.</td>
</tr>
</tbody>
</table>
<h2 id="example-file">Example File<a class="headerlink" href="#example-file" title="Permanent link">&para;</a></h2>
<p>You can use the entire file or just a subset of the configuration.</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nakama-node-1</span>
<span class="l l-Scalar l-Scalar-Plain">data_dir</span><span class="p p-Indicator">:</span> <span class="s">&quot;./data/&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">log</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">stdout</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="l l-Scalar l-Scalar-Plain">verbose</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="l l-Scalar l-Scalar-Plain">database</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">address</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;root@localhost:26257&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">conn_max_lifetime_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">60000</span>
  <span class="l l-Scalar l-Scalar-Plain">max_open_conns</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
  <span class="l l-Scalar l-Scalar-Plain">max_idle_conns</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="l l-Scalar l-Scalar-Plain">runtime</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">example_apikey</span><span class="p p-Indicator">:</span> <span class="s">&quot;example_apivalue&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="s">&quot;/tmp/modules/folders&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">http_key</span><span class="p p-Indicator">:</span> <span class="s">&quot;defaultkey&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">socket</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">server_key</span><span class="p p-Indicator">:</span> <span class="s">&quot;defaultkey&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">7350</span>
  <span class="l l-Scalar l-Scalar-Plain">max_message_size_bytes</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1024</span> <span class="c1"># bytes</span>
  <span class="l l-Scalar l-Scalar-Plain">write_wait_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5000</span>
  <span class="l l-Scalar l-Scalar-Plain">pong_wait_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10000</span>
  <span class="l l-Scalar l-Scalar-Plain">ping_period_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8000</span> <span class="c1"># Must be less than pong_wait_ms</span>

<span class="l l-Scalar l-Scalar-Plain">session</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">encryption_key</span><span class="p p-Indicator">:</span> <span class="s">&quot;defaultencryptionkey&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">token_expiry_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">60000</span>

<span class="l l-Scalar l-Scalar-Plain">purchase</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">apple</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">production</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="l l-Scalar l-Scalar-Plain">expiry_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1500</span>
  <span class="l l-Scalar l-Scalar-Plain">google</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">service_key_file</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">expiry_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1500</span>

<span class="l l-Scalar l-Scalar-Plain">social</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">notification</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">expiry_ms</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">86400000</span>
  <span class="l l-Scalar l-Scalar-Plain">steam</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">publisher_key</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">app_id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="l l-Scalar l-Scalar-Plain">dashboard</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">7351</span>

<span class="l l-Scalar l-Scalar-Plain">cluster</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">join</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;10.0.0.2:7352&quot;</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;10.0.0.3:7352&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">gossip_bindaddr</span><span class="p p-Indicator">:</span> <span class="s">&quot;0.0.0.0&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">gossip_bindport</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">7352</span>
  <span class="l l-Scalar l-Scalar-Plain">rpc_port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">7353</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../install-binary/" title="Binary install" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Binary install
              </span>
            </div>
          </a>
        
        
          <a href="../install-server-cli/" title="Nakama CLI" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Nakama CLI
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 Heroic Labs
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://heroiclabs.com" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/heroiclabs" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/heroicdev" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/heroic-labs" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-c35428f87f.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
        <script src="../js/main.js"></script>
      
    
    
      
    
  </body>
</html>